# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ AI-–ø—Å–∏—Ö–æ–ª–æ–≥–∞ –Ω–∞ –±–∞–∑–µ Claude Sonnet 4.5

## üìã –û–±–∑–æ—Ä —Ñ–∏—á–∏

**–¶–µ–ª—å**: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–Ω–µ–≤–Ω–∏–∫–∞, —á–µ–∫–∏–Ω–æ–≤, –∑–∞–º–µ—Ä–æ–≤ –∏ –∏–º–ø—É–ª—å—Å–æ–≤.

**–†–æ–ª—å AI**: –ü—Å–∏—Ö–æ–ª–æ–≥-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–≤–µ–¥–µ–Ω–∏—è, –≤—ã—è–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –∏ –¥–∞—ë—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

---

## üóÑÔ∏è 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

#### 1.1 Daily Checkins (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —á–µ–∫–∏–Ω—ã)
- `workout` - —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (–¥–∞/–Ω–µ—Ç)
- `workout_type` - —Ç–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (strength/cardio/rest)
- `nutrition` - –ø–∏—Ç–∞–Ω–∏–µ (–¥–∞/–Ω–µ—Ç)
- `water` - –≤–æ–¥–∞ (–¥–∞/–Ω–µ—Ç)
- `water_liters` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏—Ç—Ä–æ–≤
- `sleep_hours` - —á–∞—Å—ã —Å–Ω–∞
- `mood` - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (1-5)
- `steps` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤

#### 1.2 Mindfulness Entries (–¥–Ω–µ–≤–Ω–∏–∫ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏)
- `gratitude` - –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å
- `wins` - –º–∞–ª–µ–Ω—å–∫–∏–µ –ø–æ–±–µ–¥—ã
- `challenges` - —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏
- `lessons` - —É—Ä–æ–∫–∏
- `mood_note` - –∑–∞–º–µ—Ç–∫–∞ –æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏

#### 1.3 Impulse Logs (—Ç—Ä–µ–∫–µ—Ä –∏–º–ø—É–ª—å—Å–æ–≤)
- `trigger_type` - —Ç—Ä–∏–≥–≥–µ—Ä (stress/boredom/social/emotional/habitual)
- `intensity` - –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å (1-10)
- `action_taken` - –¥–µ–π—Å—Ç–≤–∏–µ (resisted/gave_in/alternative)
- `notes` - –∑–∞–º–µ—Ç–∫–∏

#### 1.4 Task Completions (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π
- –ü–∞—Ç—Ç–µ—Ä–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–∫–∞–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è)

#### 1.5 Weekly Measurements (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ä—ã)
- `weight` - –≤–µ—Å
- –û–±—ä—ë–º—ã —Ç–µ–ª–∞
- –î–∏–Ω–∞–º–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üèóÔ∏è 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 2.1 Backend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
/backend/src/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ aiPsychologistService.ts    # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å AI-–ø—Å–∏—Ö–æ–ª–æ–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ weeklyDataService.ts        # –°–±–æ—Ä –Ω–µ–¥–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ claudeService.ts            # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude API
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ api.ts                      # –î–æ–±–∞–≤–∏—Ç—å endpoint: /api/psychology/weekly-analysis/:userId
‚îú‚îÄ‚îÄ db/migrations/
‚îÇ   ‚îî‚îÄ‚îÄ 013_psychology_analyses.sql # –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ index.ts                    # –¢–∏–ø—ã –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
```

### 2.2 Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
/frontend/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ PsychologyInsight.tsx       # –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Å–∞–π—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ PsychologyAnalysis.tsx      # –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îî‚îÄ‚îÄ PsychologyPage.tsx          # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∞–Ω–∞–ª–∏–∑–æ–≤
‚îî‚îÄ‚îÄ store/
    ‚îî‚îÄ‚îÄ index.ts                    # –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏
```

---

## üìä 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 3.1 –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞: psychology_analyses

```sql
CREATE TABLE psychology_analyses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  week_number INTEGER NOT NULL,

  -- AI –∞–Ω–∞–ª–∏–∑ (JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
  analysis JSONB NOT NULL,

  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  data_summary JSONB NOT NULL,  -- –°–≤–æ–¥–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

  UNIQUE(user_id, week_number)
);

CREATE INDEX idx_psychology_user_week ON psychology_analyses(user_id, week_number DESC);
```

### 3.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ analysis JSONB

```typescript
{
  "behavioral_patterns": {
    "consistency": {
      "score": 7,  // 1-10
      "observation": "–ó–∞–º–µ—Ç–Ω–∞ –≤—ã—Å–æ–∫–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö...",
      "evidence": ["6 –∏–∑ 7 –¥–Ω–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏", "...]
    },
    "sleep": {
      "score": 4,
      "observation": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Å–Ω–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ...",
      "evidence": ["–°—Ä–µ–¥–Ω–∏–π —Å–æ–Ω 5.5 —á–∞—Å–æ–≤", "...]
    },
    "nutrition": {
      "score": 8,
      "observation": "–û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–∏–≤–µ—Ä–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–ª–∞–Ω—É –ø–∏—Ç–∞–Ω–∏—è...",
      "evidence": [...]
    },
    "emotional_state": {
      "score": 5,
      "observation": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –Ω–µ–¥–µ–ª–∏...",
      "evidence": ["–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ 2/5 –≤ —Å—Ä–µ–¥—É", "–ò–º–ø—É–ª—å—Å —É—Ä–æ–≤–Ω—è 8", ...]
    }
  },

  "key_insights": [
    {
      "type": "warning",  // warning | positive | neutral
      "title": "–•—Ä–æ–Ω–∏—á–µ—Å–∫–∏–π –Ω–µ–¥–æ—Å—ã–ø –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å",
      "description": "–ê–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —Å–Ω–∞ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å—Ä—ã–≤–∞–º–∏...",
      "priority": "high"  // high | medium | low
    },
    {
      "type": "positive",
      "title": "–£—Å–ø–µ—à–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞–º–∏",
      "description": "4 –∏–∑ 5 –∏–º–ø—É–ª—å—Å–æ–≤ —É—Å–ø–µ—à–Ω–æ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω—ã...",
      "priority": "medium"
    }
  ],

  "identified_problems": [
    {
      "problem": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Å–Ω–∞ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ñ–µ–∏–Ω–æ–º",
      "root_cause": "–°—Ç—Ä–µ—Å—Å –Ω–∞ —Ä–∞–±–æ—Ç–µ + –ø–æ–∑–¥–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
      "impact": "–°–Ω–∏–∂–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å",
      "evidence": ["–ó–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ –æ —Å—Ç—Ä–µ—Å—Å–µ", "–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–Ω–∞ 5.5 —á–∞—Å–æ–≤", ...]
    }
  ],

  "recommendations": [
    {
      "category": "sleep",  // sleep | nutrition | training | mindset | stress
      "priority": "high",
      "action": "–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –Ω–∞ —É—Ç—Ä–æ –∏–ª–∏ –æ–±–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è",
      "why": "–ü–æ–∑–¥–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–ø–æ—Å–ª–µ 19:00) –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É...",
      "how": [
        "–ü–æ–ø—Ä–æ–±—É–π —É—Ç—Ä–µ–Ω–Ω—é—é —Å–∏–ª–æ–≤—É—é –Ω–∞ 3 –¥–Ω—è –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ",
        "–ò—Å–ø–æ–ª—å–∑—É–π –≤–µ—á–µ—Ä–æ–º —Ç–æ–ª—å–∫–æ –ª—ë–≥–∫—É—é —Ä–∞—Å—Ç—è–∂–∫—É –∏–ª–∏ –ø—Ä–æ–≥—É–ª–∫—É"
      ],
      "expected_result": "–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–Ω–∞, —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è"
    },
    {
      "category": "mindset",
      "priority": "medium",
      "action": "–ü—Ä–∞–∫—Ç–∏–∫–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ —Å–Ω–æ–º",
      "why": "–¢–≤–æ–∏ –∑–∞–ø–∏—Å–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞—Ö...",
      "how": [
        "–ö–∞–∂–¥—ã–π –≤–µ—á–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–π 3 –≤–µ—â–∏, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω",
        "–§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø–æ–±–µ–¥–∞—Ö, –∞ –Ω–µ –Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞—Ö"
      ],
      "expected_result": "–£–ª—É—á—à–µ–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞"
    }
  ],

  "progress_recognition": {
    "wins": [
      "–£—Å–ø–µ—à–Ω–æ —É—Å—Ç–æ—è–ª –ø–µ—Ä–µ–¥ 4 –∏–º–ø—É–ª—å—Å–∞–º–∏ –∫ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—é",
      "–í–ø–µ—Ä–≤—ã–µ –≤—ã–ø–æ–ª–Ω–∏–ª –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –Ω–µ–¥–µ–ª–∏",
      "–í–µ—Å —Å–Ω–∏–∑–∏–ª—Å—è –Ω–∞ 0.8 –∫–≥"
    ],
    "growth_areas": [
      "–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–Ω–∞",
      "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ—Å—Å–æ–º"
    ]
  },

  "next_week_focus": [
    "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –≤—Ä–µ–º–µ–Ω–µ–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫",
    "–ü—Ä–∞–∫—Ç–∏–∫–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏",
    "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–≤—è–∑–∏ —Å—Ç—Ä–µ—Å—Å ‚Üí –∏–º–ø—É–ª—å—Å—ã"
  ]
}
```

---

## ü§ñ 4. Prompt Engineering

### 4.1 System Prompt –¥–ª—è Claude

```
–¢—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö
–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ñ–∏—Ç–Ω–µ—Å–∞ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ç–µ–ª–∞.

–¢–í–û–Ø –†–û–õ–¨:
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –Ω–µ–¥–µ–ª—é
- –í—ã—è–≤–ª—è—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö –≥–ª—É–±–∏–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã
- –î–∞–≤–∞—Ç—å –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–æ—Ç–∏–≤–∞—Ü–∏—é —á–µ—Ä–µ–∑ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

–ü–†–ò–ù–¶–ò–ü–´ –ê–ù–ê–õ–ò–ó–ê:
1. Evidence-based: –ö–∞–∂–¥–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–∫—Ä–µ–ø–ª—è–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
2. Compassionate: –ë—É–¥—å —ç–º–ø–∞—Ç–∏—á–Ω—ã–º, –Ω–µ –æ—Å—É–∂–¥–∞–π
3. Actionable: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏–º—ã–º–∏
4. Holistic: –£—á–∏—Ç—ã–≤–∞–π –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ
5. Growth-oriented: –§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–∏, –∞ –Ω–µ –Ω–∞ –Ω–µ—É–¥–∞—á–∞—Ö

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê:
–°—Ç—Ä–æ–≥–æ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–±–µ–∑ markdown, –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤):
{
  "behavioral_patterns": { ... },
  "key_insights": [ ... ],
  "identified_problems": [ ... ],
  "recommendations": [ ... ],
  "progress_recognition": { ... },
  "next_week_focus": [ ... ]
}

–í–ê–ñ–ù–û:
- –ò—â–∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –¥–∞–Ω–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ø–ª–æ—Ö–æ–π —Å–æ–Ω ‚Üí –ø–ª–æ—Ö–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ ‚Üí –∏–º–ø—É–ª—å—Å—ã)
- –û–±—Ä–∞—â–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–∞ (–ø–æ—á–µ–º—É –≤ —Å—Ä–µ–¥—É –±—ã–ª —Å—Ä—ã–≤?)
- –ü—Ä–∏–∑–Ω–∞–≤–∞–π —É—Å–ø–µ—Ö–∏, –¥–∞–∂–µ –º–∞–ª–µ–Ω—å–∫–∏–µ
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å SMART (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ, –∏–∑–º–µ—Ä–∏–º—ã–µ, –¥–æ—Å—Ç–∏–∂–∏–º—ã–µ)
```

### 4.2 User Prompt (–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–µ–ª–∏)

```
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –Ω–µ–¥–µ–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userName} (–Ω–µ–¥–µ–ª—è ${weekNumber}):

–¶–ï–õ–¨: ${userGoal === 'weight_loss' ? '–ü–æ—Ö—É–¥–µ–Ω–∏–µ' : '–ù–∞–±–æ—Ä –º–∞—Å—Å—ã'}

=== –ï–ñ–ï–î–ù–ï–í–ù–´–ï –ß–ï–ö–ò–ù–´ ===
${checkinsData}

=== –î–ù–ï–í–ù–ò–ö –û–°–û–ó–ù–ê–ù–ù–û–°–¢–ò ===
${mindfulnessData}

=== –ò–ú–ü–£–õ–¨–°–´ –ò –°–†–´–í–´ ===
${impulsesData}

=== –í–´–ü–û–õ–ù–ï–ù–ò–ï –ó–ê–î–ê–ù–ò–ô ===
${tasksData}

=== –ó–ê–ú–ï–†–´ ===
${measurementsData}

–î–∞–π –≥–ª—É–±–æ–∫–∏–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏.
```

---

## üíª 5. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Backend

### 5.1 Service: weeklyDataService.ts

```typescript
export const weeklyDataService = {
  async collectWeeklyData(userId: string, weekNumber: number) {
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –Ω–µ–¥–µ–ª–∏
    const { startDate, endDate } = getWeekDateRange(weekNumber);

    // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    const [checkins, mindfulness, impulses, tasks, measurements] =
      await Promise.all([
        getDailyCheckins(userId, startDate, endDate),
        getMindfulnessEntries(userId, startDate, endDate),
        getImpulseLogs(userId, startDate, endDate),
        getTaskCompletions(userId, weekNumber),
        getWeeklyMeasurement(userId, weekNumber)
      ]);

    return {
      checkins,
      mindfulness,
      impulses,
      tasks,
      measurements,
      summary: generateDataSummary(...)  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    };
  }
};
```

### 5.2 Service: claudeService.ts

```typescript
import Anthropic from '@anthropic-ai/sdk';

const anthropic = new Anthropic({
  apiKey: process.env.ANTHROPIC_API_KEY,
});

export const claudeService = {
  async analyzeWeeklyBehavior(
    weeklyData: WeeklyData,
    user: User
  ): Promise<PsychologyAnalysis> {

    const systemPrompt = PSYCHOLOGY_SYSTEM_PROMPT;
    const userPrompt = buildUserPrompt(weeklyData, user);

    const response = await anthropic.messages.create({
      model: 'claude-sonnet-4-5-20250929',
      max_tokens: 4000,
      temperature: 0.7,
      system: systemPrompt,
      messages: [
        { role: 'user', content: userPrompt }
      ]
    });

    const analysisText = response.content[0].text;
    const analysis = JSON.parse(analysisText);

    return analysis;
  }
};
```

### 5.3 Service: aiPsychologistService.ts

```typescript
export const aiPsychologistService = {

  async generateWeeklyAnalysis(userId: string, weekNumber: number) {
    // 1. –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    const weeklyData = await weeklyDataService.collectWeeklyData(
      userId,
      weekNumber
    );

    // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –¥–∞–Ω–Ω—ã—Ö
    if (!hasEnoughData(weeklyData)) {
      throw new Error('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞');
    }

    // 3. –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const user = await userService.findById(userId);

    // 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ Claude
    const analysis = await claudeService.analyzeWeeklyBehavior(
      weeklyData,
      user
    );

    // 5. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
    const saved = await savePsychologyAnalysis({
      user_id: userId,
      week_number: weekNumber,
      analysis,
      data_summary: weeklyData.summary
    });

    return saved;
  },

  async getAnalysis(userId: string, weekNumber: number) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —É–∂–µ –∞–Ω–∞–ª–∏–∑
    const existing = await query(
      'SELECT * FROM psychology_analyses WHERE user_id = $1 AND week_number = $2',
      [userId, weekNumber]
    );

    if (existing.rows[0]) {
      return existing.rows[0];
    }

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π
    return this.generateWeeklyAnalysis(userId, weekNumber);
  },

  async getAnalysisHistory(userId: string, limit = 10) {
    const result = await query(
      `SELECT * FROM psychology_analyses
       WHERE user_id = $1
       ORDER BY week_number DESC
       LIMIT $2`,
      [userId, limit]
    );
    return result.rows;
  }
};
```

### 5.4 API Routes

```typescript
// GET /api/psychology/analysis/:userId/:weekNumber
router.get('/psychology/analysis/:userId/:weekNumber',
  requireAuth,
  requireSelfOrTrainer,
  async (req: Request, res: Response) => {
    const { userId, weekNumber } = req.params;

    try {
      const analysis = await aiPsychologistService.getAnalysis(
        userId,
        parseInt(weekNumber)
      );

      res.json({
        success: true,
        data: analysis
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        error: error.message
      });
    }
  }
);

// GET /api/psychology/history/:userId
router.get('/psychology/history/:userId',
  requireAuth,
  requireSelfOrTrainer,
  async (req: Request, res: Response) => {
    const { userId } = req.params;
    const limit = parseInt(req.query.limit as string) || 10;

    const history = await aiPsychologistService.getAnalysisHistory(
      userId,
      limit
    );

    res.json({
      success: true,
      data: history
    });
  }
);

// POST /api/psychology/regenerate/:userId/:weekNumber
// –î–ª—è —Ç—Ä–µ–Ω–µ—Ä–∞ - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞
router.post('/psychology/regenerate/:userId/:weekNumber',
  requireAuth,
  trainerOnly,
  async (req: Request, res: Response) => {
    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π
  }
);
```

---

## üé® 6. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Frontend

### 6.1 Component: PsychologyInsight.tsx

–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å –∫—Ä–∞—Ç–∫–∏–º –∏–Ω—Å–∞–π—Ç–æ–º:

```tsx
export function PsychologyInsight() {
  const { user, courseWeek } = useStore();
  const [analysis, setAnalysis] = useState(null);
  const [loading, setLoading] = useState(false);

  useEffect(() => {
    loadAnalysis();
  }, [courseWeek]);

  const loadAnalysis = async () => {
    setLoading(true);
    const data = await api.getPsychologyAnalysis(user.id, courseWeek);
    setAnalysis(data);
    setLoading(false);
  };

  if (!analysis) return null;

  const topInsight = analysis.key_insights[0];

  return (
    <motion.div className="brutal-card p-4">
      <div className="flex items-center gap-2 mb-3">
        <span className="text-xl">üß†</span>
        <h3 className="font-display font-bold text-steel-100 uppercase">
          –ü—Å–∏—Ö–æ–ª–æ–≥
        </h3>
      </div>

      <div className={`border-l-4 pl-3 ${
        topInsight.type === 'warning' ? 'border-neon-magenta' :
        topInsight.type === 'positive' ? 'border-neon-lime' :
        'border-neon-cyan'
      }`}>
        <h4 className="font-display font-bold text-sm mb-1">
          {topInsight.title}
        </h4>
        <p className="text-xs text-steel-400 line-clamp-2">
          {topInsight.description}
        </p>
      </div>

      <Link to="/psychology" className="mt-3 block">
        <button className="w-full brutal-button text-xs py-2">
          –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ ‚Üí
        </button>
      </Link>
    </motion.div>
  );
}
```

### 6.2 Page: PsychologyPage.tsx

–ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º:

```tsx
export default function PsychologyPage() {
  const { user, courseWeek } = useStore();
  const [analysis, setAnalysis] = useState(null);
  const [selectedWeek, setSelectedWeek] = useState(courseWeek);
  const [loading, setLoading] = useState(true);

  return (
    <div className="min-h-screen bg-void-100 pb-20">
      {/* Header */}
      <header className="brutal-header">
        <h1>üß† –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</h1>
      </header>

      {/* Week Selector */}
      <section className="px-4 py-4">
        <select value={selectedWeek} onChange={...}>
          <option value={courseWeek}>–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è ({courseWeek})</option>
          {/* –ü—Ä–æ—à–ª—ã–µ –Ω–µ–¥–µ–ª–∏ */}
        </select>
      </section>

      {/* Behavioral Patterns */}
      <section className="px-4 mb-6">
        <h2 className="font-display text-lg mb-3">–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–≤–µ–¥–µ–Ω–∏—è</h2>
        <div className="grid grid-cols-2 gap-3">
          {Object.entries(analysis.behavioral_patterns).map(([key, pattern]) => (
            <PatternCard key={key} pattern={pattern} />
          ))}
        </div>
      </section>

      {/* Key Insights */}
      <section className="px-4 mb-6">
        <h2 className="font-display text-lg mb-3">–ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã</h2>
        {analysis.key_insights.map((insight, i) => (
          <InsightCard key={i} insight={insight} />
        ))}
      </section>

      {/* Problems & Recommendations */}
      <section className="px-4 mb-6">
        <h2 className="font-display text-lg mb-3">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
        {analysis.recommendations.map((rec, i) => (
          <RecommendationCard key={i} recommendation={rec} />
        ))}
      </section>

      {/* Progress Recognition */}
      <section className="px-4 mb-6">
        <h2 className="font-display text-lg mb-3">–¢–≤–æ–∏ –ø–æ–±–µ–¥—ã</h2>
        <div className="brutal-card p-4">
          {analysis.progress_recognition.wins.map((win, i) => (
            <div key={i} className="flex items-start gap-2 mb-2">
              <span className="text-neon-lime">‚úì</span>
              <p className="text-sm text-steel-300">{win}</p>
            </div>
          ))}
        </div>
      </section>
    </div>
  );
}
```

---

## üîß 7. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ Environment Variables

### 7.1 Backend .env

```env
# Anthropic Claude API
ANTHROPIC_API_KEY=sk-ant-...

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI –ø—Å–∏—Ö–æ–ª–æ–≥–∞
AI_PSYCHOLOGIST_ENABLED=true
AI_PSYCHOLOGIST_MODEL=claude-sonnet-4-5-20250929
AI_PSYCHOLOGIST_MAX_TOKENS=4000
AI_PSYCHOLOGIST_TEMPERATURE=0.7

# –ú–∏–Ω–∏–º—É–º –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
MIN_CHECKINS_FOR_ANALYSIS=3  # –º–∏–Ω–∏–º—É–º 3 —á–µ–∫–∏–Ω–∞ –∑–∞ –Ω–µ–¥–µ–ª—é
MIN_MINDFULNESS_FOR_ANALYSIS=2
```

### 7.2 config.ts

```typescript
export const config = {
  // ... existing config

  ai: {
    anthropicApiKey: process.env.ANTHROPIC_API_KEY,
    psychologist: {
      enabled: process.env.AI_PSYCHOLOGIST_ENABLED === 'true',
      model: process.env.AI_PSYCHOLOGIST_MODEL || 'claude-sonnet-4-5-20250929',
      maxTokens: parseInt(process.env.AI_PSYCHOLOGIST_MAX_TOKENS || '4000'),
      temperature: parseFloat(process.env.AI_PSYCHOLOGIST_TEMPERATURE || '0.7'),
      minCheckinsForAnalysis: parseInt(process.env.MIN_CHECKINS_FOR_ANALYSIS || '3'),
      minMindfulnessForAnalysis: parseInt(process.env.MIN_MINDFULNESS_FOR_ANALYSIS || '2')
    }
  }
};
```

---

## üß™ 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 8.1 Unit —Ç–µ—Å—Ç—ã

```typescript
describe('weeklyDataService', () => {
  it('should collect all weekly data', async () => {
    const data = await weeklyDataService.collectWeeklyData(userId, 1);
    expect(data).toHaveProperty('checkins');
    expect(data).toHaveProperty('mindfulness');
    expect(data).toHaveProperty('impulses');
  });

  it('should throw error if insufficient data', async () => {
    await expect(
      weeklyDataService.collectWeeklyData(emptyUserId, 1)
    ).rejects.toThrow('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö');
  });
});

describe('claudeService', () => {
  it('should return valid JSON analysis', async () => {
    const analysis = await claudeService.analyzeWeeklyBehavior(mockData, mockUser);
    expect(analysis).toHaveProperty('behavioral_patterns');
    expect(analysis).toHaveProperty('recommendations');
  });
});
```

### 8.2 Integration —Ç–µ—Å—Ç—ã

```typescript
describe('Psychology API', () => {
  it('GET /api/psychology/analysis/:userId/:weekNumber', async () => {
    const response = await request(app)
      .get(`/api/psychology/analysis/${userId}/1`)
      .set('Authorization', `Bearer ${token}`);

    expect(response.status).toBe(200);
    expect(response.body.success).toBe(true);
    expect(response.body.data).toHaveProperty('analysis');
  });
});
```

---

## üìà 9. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### 9.1 –ú–µ—Ç—Ä–∏–∫–∏

- **Latency**: –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ (—Ü–µ–ª—å: < 10 —Å–µ–∫)
- **Cost**: –°—Ç–æ–∏–º–æ—Å—Ç—å API –≤—ã–∑–æ–≤–æ–≤ Claude (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞—Å—Ö–æ–¥–æ–≤)
- **Cache hit rate**: % –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤
- **User satisfaction**: Feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 9.2 –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
// –ö–µ—à–∏—Ä—É–µ–º –≥–æ—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –≤ –ë–î
// –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É —Ç—Ä–µ–Ω–µ—Ä–∞ –∏–ª–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
const CACHE_TTL = 7 * 24 * 60 * 60; // 7 –¥–Ω–µ–π
```

### 9.3 Rate Limiting

```typescript
// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–æ–≤
const RATE_LIMIT = {
  perUser: 5,  // 5 –∞–Ω–∞–ª–∏–∑–æ–≤ –≤ –¥–µ–Ω—å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  perDay: 1000 // 1000 –∞–Ω–∞–ª–∏–∑–æ–≤ –≤ –¥–µ–Ω—å –≤—Å–µ–≥–æ
};
```

---

## üöÄ 10. –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (–ø–æ—ç—Ç–∞–ø–Ω—ã–π)

### Phase 1: MVP (–ù–µ–¥–µ–ª—è 1)
‚úÖ **Backend**:
- –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (psychology_analyses)
- weeklyDataService (—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö)
- claudeService (–±–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- aiPsychologistService (–æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞)
- API endpoints

‚úÖ **Frontend**:
- –ë–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç PsychologyInsight (–∫–∞—Ä—Ç–æ—á–∫–∞)
- API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ store

‚úÖ **Testing**:
- Unit —Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
- Manual testing —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### Phase 2: Enhancement (–ù–µ–¥–µ–ª—è 2)
üîß **–£–ª—É—á—à–µ–Ω–∏—è**:
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ PsychologyPage
- –ò—Å—Ç–æ—Ä–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤
- –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–¥–±–µ–∫–∞
- Error handling & edge cases

### Phase 3: Polish (–ù–µ–¥–µ–ª—è 3)
‚ú® **–î–æ—Ä–∞–±–æ—Ç–∫–∞**:
- Notifications (–Ω–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –¥–æ—Å—Ç—É–ø–µ–Ω)
- Export –≤ PDF
- –¢—Ä–µ–Ω–µ—Ä—Å–∫–∞—è –ø–∞–Ω–µ–ª—å (–ø—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏–∑–æ–≤ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)
- A/B —Ç–µ—Å—Ç—ã –ø—Ä–æ–º–ø—Ç–æ–≤

---

## üí∞ 11. –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### Claude API Pricing (Sonnet 4.5)
- Input: $3 / 1M tokens
- Output: $15 / 1M tokens

### –†–∞—Å—á—ë—Ç –Ω–∞ 1 –∞–Ω–∞–ª–∏–∑:
- Input prompt: ~2000 tokens (–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–µ–ª–∏)
- Output: ~2500 tokens (JSON –∞–Ω–∞–ª–∏–∑)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: ~$0.04 –∑–∞ –∞–Ω–∞–ª–∏–∑

### –ú–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
- 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π √ó 4 –∞–Ω–∞–ª–∏–∑–∞/–º–µ—Å—è—Ü = 400 –∞–Ω–∞–ª–∏–∑–æ–≤
- **$16/–º–µ—Å—è—Ü**

---

## ‚úÖ 12. –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### Backend
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è 013_psychology_analyses.sql
- [ ] weeklyDataService.ts
- [ ] claudeService.ts
- [ ] aiPsychologistService.ts
- [ ] API routes –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Types –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Unit —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã

### Frontend
- [ ] PsychologyInsight –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] PsychologyPage —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [ ] API –∫–ª–∏–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] Store —Ä–∞—Å—à–∏—Ä–µ–Ω
- [ ] Routing –¥–æ–±–∞–≤–ª–µ–Ω

### DevOps
- [ ] ANTHROPIC_API_KEY –≤ Railway secrets
- [ ] Environment variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ API usage

### Documentation
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] Prompt engineering guide
- [ ] User guide (–∫–∞–∫ —á–∏—Ç–∞—Ç—å –∞–Ω–∞–ª–∏–∑)

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

1. ‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –ê–Ω–∞–ª–∏–∑ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ **UX**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç –∏–Ω—Å–∞–π—Ç—ã –ø–æ–ª–µ–∑–Ω—ã–º–∏ –∏ –¥–µ–π—Å—Ç–≤–µ–Ω–Ω—ã–º–∏
3. ‚úÖ **Performance**: < 10 —Å–µ–∫ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∞–Ω–∞–ª–∏–∑–∞
4. ‚úÖ **Cost**: < $50/–º–µ—Å—è—Ü –Ω–∞ AI –¥–ª—è 100+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. ‚úÖ **Quality**: –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–∏–º—ã

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **Privacy**: –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç —Å–∏—Å—Ç–µ–º—É, –∫—Ä–æ–º–µ –≤—ã–∑–æ–≤–æ–≤ Claude API (encrypted)
- **Personalization**: –ê–Ω–∞–ª–∏–∑ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ü–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ—Ö—É–¥–µ–Ω–∏–µ vs –Ω–∞–±–æ—Ä –º–∞—Å—Å—ã)
- **Language**: –í–µ—Å—å –∞–Ω–∞–ª–∏–∑ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- **Tone**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π, –Ω–µ –æ—Å—É–∂–¥–∞—é—â–∏–π, –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π

---

**–ê–≤—Ç–æ—Ä**: Claude Code
**–î–∞—Ç–∞**: 2026-01-06
**–í–µ—Ä—Å–∏—è**: 1.0
